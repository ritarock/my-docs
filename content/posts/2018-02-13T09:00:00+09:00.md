---
title: "Dockerのインストールからコンテナ作成まで"
date: 2018-02-13T09:00:00+09:00
categories:
  - docker
tags:
  - docker
draft: false
---
# 開発環境
ubuntu/trusty64
# Dockerのインストール

```
$ sudo apt-get update
$ sudo apt-get -y install \
    apt-transport-https \
    ca-certificates \
    curl \
    software-properties-common
$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -
$ sudo apt-key fingerprint 0EBFCD88
$ sudo add-apt-repository -y  \
   "deb [arch=amd64] https://download.docker.com/linux/ubuntu \
   $(lsb_release -cs) \
   stable"
$ sudo apt-get update
$ sudo apt-get install -y docker-ce
```

# Dockerコマンド

### ローカルに保存されたdockerイメージの一覧を取得
```
$docker images
```

### docker hubにあるイメージを検索
```
$docker search <イメージ>
```

### docker hubにあるイメージをローカルに取得する
```
$docker pull <イメージ>
```

### コンテナでプロセスを起動する
```
$docker run -it <イメージ> /bin/bash
```

起動したコンテナはexitすれば自動的に終了

### プロセスを確認する(停止されたものも含む)
```
$ docker ps -a
```

### 停止されたコンテナの削除
```
$ docker rm <コンテナid>
```
idは一意なので頭の4桁程度入力すればOK

何度もコンテナの起動と停止を行なっていると大量にプロセスが生まれるのでそれを避けたい
### コンテナを全て削除
```
$ docker rm $(docker ps -aq)
```

### exitと同時にコンテナの削除
```
$docker run --rm -it <イメージ> /bin/bash
```

### ポートをホスト側に公開して起動
```
$ docker run -it -p 80:80 <イメージ> /bin/bash
```

### 外部ファイルを取り込む
```
$ docker run -it -v <ホスト側のパス>:<コンテナ側のパス> <イメージ> /bin/bash
```

# Dockerfile作成してからの流れ

### Dockerfileからイメージを作成
```
$ docker build -t <作成するイメージ名> .
```

### 作成したイメージからコンテナを起動
```
$ docker run --name <起動するコンテナ名> -d -p <イメージ名>
```

### コンテナの停止
```
$ docker stop <コンテナ名>
```

